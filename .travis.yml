language: rust

sudo: false

matrix:
  include:
    - os: linux
      dist: trusty
      addons:
        chrome: stable
#    - os: osx
#      addons:
#        chrome: beta

rust:
#  - nightly
  - stable
#  - beta

env:
#  - TARGET=wasm32-unknown-unknown
  - TARGET=asmjs-unknown-emscripten
#  - TARGET=wasm32-unknown-emscripten

script:
  - nvm install 9
  - git clone https://github.com/koute/stdweb.git
  - cd stdweb
  - export RUST_BACKTRACE=1
  - export CARGO_WEB_LOG=cargo_web=debug
  - rustup target add asmjs-unknown-emscripten
  - cargo web test --target-asmjs-emscripten
